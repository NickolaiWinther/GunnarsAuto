USE master
IF EXISTS(SELECT * FROM sys.databases WHERE name='GunnarsAuto')
DROP DATABASE GunnarsAuto

CREATE DATABASE GunnarsAuto
GO

USE GunnarsAuto

CREATE TABLE SalesPersons(
	Id INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	Firstname NVARCHAR(20) NOT NULL,
	Lastname NVARCHAR(20) NOT NULL,
	Initials NCHAR(4)
)

CREATE TABLE Cars(
	Id INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	Make NVARCHAR(20) NOT NULL,
	Model NVARCHAR(20) NOT NULL,
	VIN NCHAR(17) NOT NULL,
	RegistryNumber NCHAR(7) NOT NULL,
	IsUsed BIT NOT NULL
)

CREATE TABLE Sales(
	Id INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	BuyDate DATE NOT NULL DEFAULT GETDATE(),
	BuyPrice MONEY NOT NULL,
	SellDate DATE,
	SellPrice MONEY,
	IsSold BIT NOT NULL DEFAULT 0,
	SalesPersonId INT NOT NULL FOREIGN KEY REFERENCES SalesPersons(Id),
	CarId INT NOT NULL FOREIGN KEY REFERENCES Cars(Id)
)

INSERT INTO SalesPersons VALUES ('Gunnar', 'Dannen-Skiold', 'GUDA')
INSERT INTO SalesPersons VALUES ('Jens-Ejner', 'Hansen', 'JEHA')
INSERT INTO SalesPersons VALUES ('Arne', 'Sigtenbjerggaard', 'ARSI')
INSERT INTO SalesPersons VALUES ('Berit', 'Sørensen', 'BESØ')
INSERT INTO SalesPersons VALUES ('Johann', 'Gambolputty', 'JOGA')

INSERT INTO Cars VALUES ('Dodge', 'Ram Pickup 3500', 'Z74388DMTE5V2430C', 'LM20123', 0)
INSERT INTO Cars VALUES ('Toyota', 'RAV4', 'Y17058N4835548562', 'AB23123', 1)
INSERT INTO Cars VALUES ('Ford', 'F-350 Super Duty', '1VE59HA02T2211471', 'NP26123', 0)
INSERT INTO Cars VALUES ('Hyundai', 'Tiburon', 'D91J40674VU83VG95', 'TU29123', 0)
INSERT INTO Cars VALUES ('Cadillac', 'STS-V', 'W4680870255KB7016', 'CD32123', 1)
INSERT INTO Cars VALUES ('Jeep', 'Patriot', '5D99350X8P95AE303', 'RS35123', 0)
INSERT INTO Cars VALUES ('Porsche', '911', 'Y882815464802L067', 'EF38123', 1)
INSERT INTO Cars VALUES ('Audi', 'TTS', '5D6685115K00W1681', 'GH41123', 1)
INSERT INTO Cars VALUES ('Nissan', 'Frontier', '2B5N8250R76584827', 'VW44123', 0)
INSERT INTO Cars VALUES ('Aston Martin', 'DBS', '5X98294E947361F44', 'JK47123', 1)
INSERT INTO Cars VALUES ('Toyota', 'RAV4', 'E3938P95A0X0355D9', 'XY50123', 0)
INSERT INTO Cars VALUES ('Hyundai', 'Tiburon', '4V7G95D9U83V061J4', 'MN53123', 1)
INSERT INTO Cars VALUES ('Ford', 'F-350 Super Duty', '4711V2T59H2211EA0', 'ZA56123', 0)
INSERT INTO Cars VALUES ('Nissan', 'Frontier', '0R74827658252B5N8', 'OP59123', 1)
INSERT INTO Cars VALUES ('Hyundai', 'Tiburon', 'B7086081W460255K7', 'BC21123', 0)
INSERT INTO Cars VALUES ('Nissan', 'Frontier', '658B5N42R78278250', 'DE24123', 0)
INSERT INTO Cars VALUES ('Audi', 'TTS', '5K0011W1851685D66', 'RS27123', 1)
INSERT INTO Cars VALUES ('Porsche', '911', '467884802Y06L2815', 'TU30123', 1)
INSERT INTO Cars VALUES ('Toyota', 'RAV4', '55D9E30X038P993A5', 'FG33123', 0)
INSERT INTO Cars VALUES ('Hyundai', 'Tiburon', 'D3V064951UJ48V79G', 'VW36123', 1)

INSERT INTO Sales VALUES (DATEADD(month, -18, GETDATE()), 84913.21, DATEADD(month, -15, GETDATE()), 104446.19, 1, 1, 1)
INSERT INTO Sales VALUES (DATEADD(month, -14, GETDATE()), 137157.64, NULL, NULL, 0, 2, 2)
INSERT INTO Sales VALUES (DATEADD(month, -5, GETDATE()), 166391.78, NULL, NULL, 0, 3, 3)
INSERT INTO Sales VALUES (DATEADD(month, -3, GETDATE()), 84757.02, DATEADD(month, -2, GETDATE()), 134757.28, 1, 4, 4)
INSERT INTO Sales VALUES (DATEADD(day, -12, GETDATE()), 158068.08, DATEADD(day, -5, GETDATE()), 251313.67, 1, 5, 5)
INSERT INTO Sales VALUES (DATEADD(day, -12, GETDATE()), 124802.05, NULL, NULL, 0, 1, 6)
INSERT INTO Sales VALUES (DATEADD(day, -9, GETDATE()), 202657.13, DATEADD(day, -4, GETDATE()), 303979.69, 1, 2, 7)
INSERT INTO Sales VALUES (DATEADD(day, -8, GETDATE()), 162157.07, NULL, NULL, 0, 3, 8)
INSERT INTO Sales VALUES (DATEADD(day, -8, GETDATE()), 80602.17, DATEADD(day, -5, GETDATE()), 109613.84, 1, 4, 9)
INSERT INTO Sales VALUES (DATEADD(day, -8, GETDATE()), 34670.37, NULL, NULL, 0, 5, 10)
INSERT INTO Sales VALUES (DATEADD(day, -7, GETDATE()), 166236.43, GETDATE(), 207457.36, 1, 1, 11)
INSERT INTO Sales VALUES (DATEADD(day, -5, GETDATE()), 62364.46, NULL, NULL, 0, 2, 12)
INSERT INTO Sales VALUES (DATEADD(day, -5, GETDATE()), 197563.54, DATEADD(day, -1, GETDATE()), 265398.49, 1, 3, 13)
INSERT INTO Sales VALUES (DATEADD(day, -5, GETDATE()), 80602.17, DATEADD(day, -2, GETDATE()), 109613.84, 1, 4, 14)
INSERT INTO Sales VALUES (DATEADD(day, -4, GETDATE()), 95487.38, GETDATE(), 147955.47, 1, 5, 15)
INSERT INTO Sales VALUES (DATEADD(day, -2, GETDATE()), 86342.69, NULL, NULL, 0, 1, 16)
INSERT INTO Sales VALUES (DATEADD(day, -2, GETDATE()), 161356.35, NULL, NULL, 0, 1, 17)
INSERT INTO Sales VALUES (GETDATE(), 207642.26, NULL, NULL, 0, 3, 18)
INSERT INTO Sales VALUES (GETDATE(), 166236.43, NULL, NULL, 0, 4, 19)
INSERT INTO Sales VALUES (GETDATE(), 67768.98, NULL, NULL, 0, 1, 20)